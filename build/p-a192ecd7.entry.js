import{r as s,c as t,h as i,H as h}from"./p-40a38567.js";import{w as e,e as a}from"./p-d7b37f79.js";const n=class{constructor(i){s(this,i),this.bdsChange=t(this,"bdsChange",7),this.bdsChangeChips=t(this,"bdsChangeChips",7),this.bdsBlur=t(this,"bdsBlur",7),this.bdsSubmit=t(this,"bdsSubmit",7),this.chips=[],this.type="text",this.label="",this.icon="",this.delimiters=/,|;/,this.errorMessage="",this.danger=!1,this.value="",this.duplicated=!1,this.disableSubmit=!1}valueChanged(){this.bdsChangeChips.emit({data:this.chips,value:this.getLastChip()})}async isValid(){return this.validateChips()}async get(){return this.chips}async clear(){this.chips=[],this.value=""}async add(s){this.setChip(s)}async setFocus(){this.nativeInput.setFocus()}async removeFocus(){this.nativeInput.removeFocus()}validateChips(){return"email"!==this.type||!this.chips.some((s=>!this.validateChip(s)))}handleOnBlur(){this.bdsBlur.emit(this.chips)}handleAddChip(s){if(this.disableSubmit)return;const{detail:{value:t}}=s;this.setChip(t),this.value=""}getLastChip(){return this.chips[this.chips.length-1]}handleBackRemove(s){const{detail:{value:t}}=s;(null===t||t.length<=0)&&this.chips.length&&(this.removeLastChip(),this.bdsChangeChips.emit({data:this.chips,value:t}))}verifyAndSubstituteDelimiters(s){if(1===s.length&&s[0].match(this.delimiters))return"";let t=s.replace(/;/g,",").replace(/\,+|;+/g,",");return t[0].match(this.delimiters)&&(t=t.substring(1)),t}async handleChange(s){const{detail:{value:t}}=s;if(this.value=t?t.trim():"",0===t.length)return;if(!t.match(this.delimiters))return;const i=this.verifyAndSubstituteDelimiters(t);i?(i.split(this.delimiters).forEach((s=>{this.setChip(s)})),this.clearInputValues()):this.clearInputValues()}clearInputValues(s=""){this.nativeInput.value=s,this.value=s}setChip(s){!this.duplicated&&this.chips.some((t=>t.toLowerCase()===s.toLowerCase()))||e(s)&&(this.chips=[...this.chips,s])}validateChip(s){const t=s.trim();return"email"!==this.type||!a(t)}removeLastChip(){this.chips=this.chips.slice(0,this.chips.length-1)}removeChip(s){const{detail:{id:t}}=s;this.chips=this.chips.filter(((s,i)=>i.toString()!==t))}renderChips(){return this.chips.length?this.chips.map(((s,t)=>{const h=t.toString();return i("bds-chip",{class:"input-chips__chip",id:h,key:h,variant:"primary",danger:!this.validateChip(s),deletable:!0,onBdsDelete:s=>this.removeChip(s)},s)})):[]}render(){return i(h,null,i("bds-input",{ref:s=>this.nativeInput=s,icon:this.icon,label:this.label,onBdsKeyDownBackspace:s=>this.handleBackRemove(s),onBdsSubmit:s=>this.handleAddChip(s),onBdsOnBlur:()=>this.handleOnBlur(),onBdsChange:s=>this.handleChange(s),value:this.value,"error-message":this.errorMessage,danger:this.danger,chips:!0},i("span",{slot:"inside-input-left"},this.renderChips()),i("div",{slot:"input-right"},i("slot",{name:"input-right"}))))}static get watchers(){return{chips:["valueChanged"]}}};n.style='@charset "UTF-8";.sc-bds-input-chips-h{display:block}.input-chips__chip.sc-bds-input-chips{margin:2px 4px 2px 0px}.input-chips__chips.sc-bds-input-chips{-ms-flex:1;flex:1}';export{n as bds_input_chips}